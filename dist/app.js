!function(t){"use strict";function e(t,e){this.cx=e.cx,this.cy=e.cy,this.color=e.color,this.group=t.group(),this.idx=this.group.id(),e.cx=this.cx,e.cy=this.cy,this.line=new AgentLine(this.group,e),this.text=new AgentText(this.group,e),this.circle=new AgentCircle(this.group,e),this.img=new AgentImg(this.group,e),this.brackets=new AgentBrackets(this.group,e)}e.prototype.hide=function(t){this.line.hide(),this.circle.circleOut(t),this.circle.hideBG(t),this.circle.hideFill(t)},e.prototype.show=function(t){this.group.opacity(1),this.circle.showFill(!0),this.circle.showBG(!0);var e=this;return new Promise(function(i){return e.circle.circleIn(t,{earlyStart:!0,active:!0}).then(function(){return e.circle.deactivateBorder(!0),e.line.show(t).then(i)})})},e.prototype.activate=function(e,i){var r=this;return new Promise(function(o){return(i?r._circleOutPromise({active:!0}):t.NOOPPromise.then(function(){r.circle.activateBorder()})).then(function(){return r.circle.activateBorder(e),r.circle.showFill(e),r.line.activate(e).then(o)})})},e.prototype._send=function(t,e){var i=this;return new Promise(function(r){return i.activate(!0,e).then(function(){return i.text.send(t).then(r)})})},e.prototype.sendRequest=function(t){return this._send(t||"?",!0)},e.prototype.sendResponse=function(t){return this._send(t||"!",!1)},e.prototype._circleOutPromise=function(t){t=t||{};var e=this;return new Promise(function(i){return e.circle.hideFill(!0),e.circle.circleOut(!0).then(function(){return t.deactivate?e.circle.deactivateBorder(!0):e.circle.showFill(!0),e.circle.circleIn(!0,{active:t.active}).then(i)})})},e.prototype.deactivate=function(e,i){var r=this;return new Promise(function(o){r.line.deactivate(e),r.circle.deactivateBorder(e),r.circle.hideFill(e);return(i?r._circleOutPromise({deactivate:!0}):t.NOOPPromise.then(function(){r.circle.hideFill(e),r.circle.deactivateBorder()})).then(o)})},e.prototype._receive=function(t){var e=this;return new Promise(function(i){return e.text.receive(t).then(function(){return e._circleOutPromise().then(i)})})},e.prototype.receiveResponse=function(){return this._receive("!")},e.prototype.receiveRequest=function(){return this._receive("?")},e.prototype.colorize=function(e,i,r){this.text.colorize(e);var o=this;return r?new Promise(function(t){var r=o.line,n=o.circle;return i&&(r=o.circle,n=o.line),r.colorize(e).then(function(){return n.colorize(e).then(t)})}):(this.line.colorize(e,!1),this.circle.colorize(e,!1),t.NOOPPromise)},e.prototype.blur=function(t,e){var i=this;return new Promise(function(r){return i.brackets.hide(e).then(function(){return i.img.blur(t).then(r)})})},e.prototype.unblur=function(e){var i=this,r=t.NOOPPromise;return e&&(r=this.brackets.show()),new Promise(function(t){return r.then(function(){return i.img.unblur(e).then(t)})})},e.prototype.go=function(e,i,r){var o=r?1e3:null,n=this.circle.group;return r&&(n=n.animate(o)),n.move(e,i),this.img.go(e,i,o),this.line.go(e,i,o),t.timePromise(o)},t.Agent=e}(window),function(t){"use strict";function e(t,e){this.cx=e.cx,this.cy=e.cy,this.color=e.color,void 0!=e.brackets&&(this.SETTINGS=Object.assign({},e.brackets),this.x=-this.SETTINGS.width/2,this.x2=this.SETTINGS.width/2,this.group=t.group().move(this.cx,this.cy),this.left=this.draw("["),this.right=this.draw("]"))}e.prototype.draw=function(t){return this.group.plain(t).style(this.SETTINGS).opacity(0).center(this.x,0)},e.prototype.show=function(){if(!this.group)return t.NOOPPromise;return this.left.animate(200,">").opacity(1),this.right.animate(200,">").cx(this.x2).during(function(t){var e=SVG.easing.expoOut(t);this.opacity(e)}),t.timePromise(200)},e.prototype.hide=function(e){if(!this.group)return t.NOOPPromise;if(!e)return this.left.opacity(0),this.right.opacity(0).x(this.x),t.NOOPPromise;return this.left.animate(200,"<").opacity(0),this.right.animate(200,"<").cx(this.x).during(function(t){var e=SVG.easing.expoOut(1-t);this.opacity(e)}),t.timePromise(200)},t.AgentBrackets=e}(window),function(t){"use strict";function e(t,e){this.cx=e.cx,this.cy=e.cy,this.color=e.color,this.SETTINGS=Object.assign({},e.circle),this.length=2*this.SETTINGS.r*Math.PI,this.BORDER_ACTIVE_SETTINGS={"stroke-width":2*this.SETTINGS.border},this.BORDER_SETTINGS={"stroke-width":this.SETTINGS.border},this.group=t.group().move(this.cx,this.cy),this.bg=this.draw(this.SETTINGS.bg).attr("t","bg"),this.fill=this.draw({stroke:this.color,"stroke-width":2*this.SETTINGS.r,opacity:this.SETTINGS["fill-opacity"],r:.1}).attr("t","fill"),this.border=this.draw({"stroke-width":this.SETTINGS.border,"stroke-dashoffset":0,"stroke-dasharray":this.length+" "+this.length,r:this.SETTINGS.r,fill:"transparent",stroke:this.color}).attr("t","border"),this.border.rotate(-90)}e.prototype.draw=function(t){return this.group.circle().attr(t).center(0,0)},e.prototype._cicle=function(t,e,i){var r=0;i=i||{};var o=this,n={"stroke-width":2*this.SETTINGS.border};return new Promise(function(s){if(t){r+=250;var c=o.border.delay(100).animate(250,"circInOut");return c.attr({"stroke-dashoffset":e}),i.active&&c.attr(o.BORDER_ACTIVE_SETTINGS),setTimeout(s,r+100)}return o.border.attr({"stroke-dashoffset":e}),i.toActive&&o.border.attr(n),s()})},e.prototype.circleOut=function(t){return this._cicle(t,this.length)},e.prototype.circleIn=function(t,e){return this._cicle(t,0,e)},e.prototype._activateBorder=function(e,i){var r=0,o=this.border;return e&&(r+=450,o=o.delay(250).animate(200,"quadOut")),o.attr(i),t.timePromise(r)},e.prototype.deactivateBorder=function(t){return this.circleOut(!1),this._activateBorder(t,this.BORDER_SETTINGS)},e.prototype.activateBorder=function(t){return this.circleIn(!1),this._activateBorder(t,this.BORDER_ACTIVE_SETTINGS)},e.prototype.showFill=function(e){var i=0,r=this.fill;return e&&(i+=300,r=r.animate(300)),r.opacity(this.SETTINGS["fill-opacity"]),t.timePromise(i)},e.prototype.showBG=function(e){var i=0,r=this.bg;return e&&(i+=300,r=r.animate(300)),r.opacity(1),t.timePromise(i)},e.prototype.hideFill=function(e){var i=0,r=this.fill;return e&&(i+=300,r=r.animate(300)),r.opacity(0),t.timePromise(i)},e.prototype.hideBG=function(e){var i=0,r=this.bg;return e&&(i+=300,r=r.animate(300)),r.opacity(0),t.timePromise(i)},e.prototype.colorize=function(e,i){var r=0,o=this.border;return i&&(r+=200,o=o.animate(200,"cubicIn")),o.attr({stroke:e}),t.timePromise(r)},e.prototype.hide=function(){this.hideFill(!1),this.circleOut(!1),this.bg.opacity(0)},t.AgentCircle=e}(window),function(t){"use strict";function e(t,e){if(this.cx=e.cx,this.cy=e.cy,this.color=e.color,void 0!=e.img){this.SETTINGS=Object.assign({},e.img),this.group=t.group().move(this.cx,this.cy);var i=this;this.group.filter(function(t){i.blurFilter=t.gaussianBlur(0)}),this.img=this.group.image(this.SETTINGS.src,this.SETTINGS.w,this.SETTINGS.w),this.img.center(0,0)}}e.prototype.blur=function(e){if(!this.group)return t.NOOPPromise;return this.blurFilter.animate(200,"<").attr("stdDeviation",e),t.timePromise(200)},e.prototype.unblur=function(e){if(!this.group)return t.NOOPPromise;var i=0,r=this.blurFilter;return e&&(i+=200,r=r.animate(200,">")),r.attr("stdDeviation","0 0"),t.timePromise(i)},e.prototype.go=function(t,e,i){var r="flipped";t<this.cx?this.img.addClass(r):this.img.removeClass(r);var o=this.group;i?o=o.animate(i):this.img.removeClass(r),o.move(t,e),this.cx=t,this.cy=e},e.prototype.update=function(t){this.img.load(t)},t.AgentImg=e}(window),function(t){"use strict";function e(t,e){this.sx=e.cx,this.sy=e.cy,this.ex=e.mlx,this.ey=e.mly,this.color=e.color,this.SETTINGS=Object.assign({},e.line),this.SETTINGS.stroke=this.color,this.SETTINGS["stroke-linecap"]="round",this.SETTINGS["stroke-dasharray"]="5 5",this.SETTINGS.a=Random.range(10,1e3),this.group=t.group(),this.line=this.draw()}var i={opacity:1,"stroke-width":4,"stroke-opacity":1};e.prototype.draw=function(){return this.group.line(this.sx,this.sy,this.ex,this.ey).attr(this.SETTINGS)},e.prototype.hide=function(){this.line.plot(this.sx,this.sy,this.sx,this.sy)},e.prototype.go=function(t,e,i){var r=this.line;i&&(r=r.animate(i)),r.plot(t,e,this.ex,this.ey)},e.prototype.show=function(e){var r=0,o=this.line;return e&&(r+=350,o=this.line.animate(350,"cubicOut")),o.plot(this.sx,this.sy,this.ex,this.ey),e&&(r+=500,o.attr(i),o=o.animate(500,"quadOut")),o.attr(this.SETTINGS),t.timePromise(r)},e.prototype.activate=function(e){var r=0,o=this.line;return e&&(r+=350,o=this.line.animate(350,"cubicOut")),o.attr(i),t.timePromise(r)},e.prototype.deactivate=function(e){var i=0,r=this.line;return e&&(i+=350,r=this.line.animate(350,"cubicIn")),r.attr(this.SETTINGS),t.timePromise(i)},e.prototype.colorize=function(e,i){var r=0,o=this.line;return i&&(r+=400,o=o.animate(r,"cubicIn")),o.attr({stroke:e}),t.timePromise(r)},t.AgentLine=e}(window),function(t){"use strict";function e(t,e){this.sx=e.cx,this.sy=e.cy,this.ex=e.mlx,this.ey=e.mly,this.color=e.color,this.SETTINGS=Object.assign({},e.text),this.SETTINGS.fill=this.color,this.SETTINGS.stroke=this.color,this.mlR={x1:this.ex-e.mlw,y1:this.ey-e.mlw,x2:this.ex+e.mlw,y2:this.ey+e.mlw},this.showR=.2*e.circle.r,this.group=t.group(),this.circle=this.drawCircle(),this.text=this.drawText(),this.group.opacity(0)}e.prototype.drawCircle=function(){var t=this.group.group(),e=(t.circle(2*this.SETTINGS.r).attr(this.SETTINGS.bg).center(0,0),t.circle().attr(this.SETTINGS).center(0,0));return t.colorize=function(t){e.attr({stroke:t,fill:t})},t},e.prototype.drawText=function(){var t=this.group.plain("?");return t.font({fill:"#fff",size:this.SETTINGS.fz}).style({"font-family":this.SETTINGS.family}).center(0,0),t},e.prototype.send=function(t,e){this.text.plain(t||"?").center(0,0),this.group.move(this.sx,this.sy);var i=this;return new Promise(function(t){i.group.animate(3e3).move(i.ex,i.ey).during(function(r,o){var n=this.cx(),s=this.cy(),c=SVG.easing.expoOut(2*r);this.opacity(c),n>i.mlR.x1&&n<i.mlR.x2&&s>i.mlR.y1&&s<i.mlR.y2&&e?t():r>.99&&t()})})},e.prototype.receive=function(e,i,r){i=i||this.sx,r=r||this.sy,this.text.plain(e||"?").center(0,0),this.group.move(this.ex,this.ey),this.group.opacity(1);var o=this;return this.group.animate(3e3).move(i,r).during(function(t){var e=this.cx(),n=this.cy();if(Math.abs(e-i)<o.showR&&Math.abs(n-r)<o.showR){var s=SVG.easing.expoIn(t/2);this.opacity(s)}}),t.timePromise(3e3)},e.prototype.colorize=function(t){this.circle.colorize(t)},t.AgentText=e}(window),function(t){"use strict";function e(e){this.root=e.root,this.mlx=e.mlx,this.mly=e.mly,this.vertexes=e.vertexes,this.method=this[e.method]||t.NOOP,this.preparationMethods=void 0==e.preparationMethods?[]:e.preparationMethods,this._init()}e.prototype.stop=function(){this.stack&&(this.stack.stop=!0,this.stack=void 0),this.out()},e.prototype.play=function(t){var e=this;setTimeout(function(){e.method(function(){setTimeout(t,1e3)})},1e3)},e.prototype.out=function(e){this.method(e||t.NOOP,{clear:!0})},e.prototype._init=function(){this.draw=this.root.group(),this.graph=new Graph(this.draw,this.vertexes.array,this.vertexes.params),this.mlCloud=new MLCloud(this.draw,this.mlx,this.mly),this.init(),this.initPrepare()},e.prototype.initPrepare=function(){var e=this,i=this.preparationMethods.map(function(t){return function(){return new Promise(function(i){return e[t](i,{forced:!0})})}});t.promisesStack(i)},e.prototype.init=function(){},e.prototype.auction=function(e,i,r,o){var n=this,s=[];if(o)return i.activate(!1),i.colorize(this.shop.color),s;s.push(function(){return n.writeConsole(r.initial())}),s.push(function(){var i;return e.forEach(function(e){var r=[];r.push(function(){return e.text.receive("?")}),r.push(function(){return e.circle.showFill(!0),e.circle.circleIn(!0).then(function(){return e.circle.showBG(!0)})}),i=t.promisesStack(r)}),i}),s.push(function(){return t.timePromise(300)}),e.forEach(function(t,e){s.push(function(){return n.writeConsole(r.bet(t))}),s.push(function(){return t.circle.hideBG(!0),t.circle.hideFill(!0),t.circle.circleOut(!0),t.text.send(t.bet?t.bet[0]:"!")})}),e.forEach(function(e){s.push(function(){return n.writeConsole(r.calculate(e)),t.NOOPPromise}),s.push(function(){return n.mlCloud.colorShadow(e.color,!0)}),s.push(function(){return t.timePromise(80)})});for(var c=0;c<4;c++)s.push(function(){return n.mlCloud.colorShadow(n.shop.color,!0)}),s.push(function(){return t.timePromise(80)}),s.push(function(){return n.mlCloud.colorShadow(i.color,!0)}),s.push(function(){return t.timePromise(80)});return s.push(function(){return n.mlCloud.ding()}),s.push(function(){return n.writeConsole(r.ack(i)),n.mlCloud.colorShadow(n.shop.color,!0),i.colorize(n.shop.color,!1,!0)}),s.push(function(){return i.activate(!0),i.text.receive("!")}),s},t.CognIOTA=e}(window),function(t){"use strict";function e(t,e,i){this.cx=e,this.cy=i,this.color="#0060ff",this.ip="cogniOTA",this.group=t.group(),this.group.move(this.cx,this.cy),this.group.width(2*r.radius).height(2*r.radius),this.shadow=this.drawShadow(),this.hex=this.drawHex(),this.logo=this.drawLogo(),this.group.opacity(0)}var i={radius:30,fill:"#00d6ff",edges:8,stroke:"#00d6ff","stroke-width":0},r={edges:i.edges,fill:i.fill,radius:1.3*i.radius,opacity:.3},o={width:50,height:50,url:"dist/logo/l4_100.png"};e.prototype.drawShadow=function(){var t=this.group.polygon().ngon(r);return t.opacity(0),setTimeout(function(){t.opacity(1).attr(r).center(0,0)},10),t},e.prototype.drawHex=function(){var t=this.group.polygon().ngon(i);t.opacity(0);var e=this;return setTimeout(function(){e.width=t.node.getBBox().width,t.opacity(1).attr(i).center(0,0)},10),t},e.prototype.drawLogo=function(){var t=this.group.image(o.url,o.width,o.height);return t.move(-o.width/2,-o.height/2),t},e.prototype.show=function(e){if(e){this.group.scale(.01),this.group.opacity(1);var i=this;return this.group.animate(500,"elastic").scale(.8).during(function(t,e){i.shadow.rotate(360*t),i.hex.rotate(360*t)}),t.timePromise(500)}return this.group.opacity(1),t.NOOPPromise},e.prototype.hide=function(){this.group.opacity(0)},e.prototype.fallInColor=function(e,r){var o=0;this.hex.attr({stroke:e});var n,s;return r?(s=this.shadow.animate(200),this.hex.delay(200),o+=200):s=this.shadow,s.fill(e),r?(n=this.hex.delay(350).animate(180),this.shadow.delay(350).animate(180).scale(.8),s=this.shadow.delay(100).animate(400,"elastic"),o+=730):(n=this.hex,s=this.shadow),n.ngon({edges:i.edges,radius:.1}).attr({"stroke-width":1*this.width}).center(0,0),s.scale(1.08),t.timePromise(o)},e.prototype.fallOutColor=function(){return this.hex.animate(300,">").ngon({edges:i.edges,radius:i.radius}).attr({"stroke-width":0}).center(0,0),this.shadow.delay(300).animate(180).fill(this.color),this.shadow.animate(400,"elastic").scale(1),t.timePromise(0)},e.prototype.toDefault=function(){this.hex.scale(1).ngon(i).attr(i).center(0,0),this.shadow.scale(1).ngon(r).attr(r).center(0,0)},e.prototype.ding=function(e){return this.group.animate(300,"expoIn").rotate(140*(e?1:-1)).loop(2,!0),t.timePromise(600)},e.prototype.colorShadow=function(e,i){var r=0,o=this.shadow;return i&&(r+=200,o=o.animate(200)),o.fill(e),t.timePromise(r)},e.fill=i.fill,e.edges=i.edges,e.r=r.radius,t.MLCloud=e}(window),function(t){"use strict";function e(t,e){this.cx=e.pos[0],this.cy=e.pos[1],this.HIDE_PARAMS={edges:i.edgesStart,radius:TangleCognIOTA.GRAPH_SETTINGS.r/2,fill:TangleCognIOTA.GRAPH_SETTINGS.stroke},this.group=t.group().width(100),this.shadow=this.drawShadow(),this.hex=this.drawHex(MLCloud.fill)}var i={fill:"#00d6ff",edges:6,edgesStart:3,radius:15},r={fill:i.fill,edges:i.edges,radius:1.3*i.radius,opacity:.3},o={stroke:i.fill,"stroke-width":1.5,opacity:.7};e.prototype.drawShadow=function(){var t=this.group.polygon().ngon(r).opacity(0),e=this;return setTimeout(function(){t.center(e.cx,e.cy).attr(r)},10),t},e.prototype.drawHex=function(){var t=this.group.polygon().ngon(i).opacity(0);t.attr(i);var e=this;return setTimeout(function(){t.center(e.cx,e.cy).opacity(1)},10),t},e.prototype.showHex=function(){this.hex.fill(this.HIDE_PARAMS.fill);for(var e=TangleCognIOTA.GRAPH_SETTINGS.r/2,r=i.edgesStart,o=i.edges-i.edgesStart,n=(i.radius-e)/o;r<=i.edges;r++,e+=n){var s=this.hex.animate(70);s.ngon({edges:r,radius:e}).center(this.cx,this.cy),r>=i.edges-1&&s.fill(i.fill)}return t.timePromise(70*o)},e.prototype.showShadow=function(){return this.shadow.delay(100).animate(300,"backOut").ngon({edges:r.edges,radius:r.radius}).center(this.cx,this.cy),t.timePromise(380)},e.prototype.hide=function(){this.hex.ngon(this.HIDE_PARAMS).fill("transparent").opacity(1).center(this.cx,this.cy),this.shadow.ngon({edges:r.edges,radius:.1}).opacity(r.opacity).center(this.cx,this.cy)},e.prototype.show=function(e){if(e){var o=this;return new Promise(function(t){o.showHex(e).then(function(){o.showShadow(e).then(t)})})}i.edgesStart,TangleCognIOTA.GRAPH_SETTINGS.r,TangleCognIOTA.GRAPH_SETTINGS.fill;return this.hex.ngon(i).center(this.cx,this.cy).attr(i).opacity(1),this.shadow.ngon(r).attr(r).center(this.cx,this.cy),t.NOOPPromise},e.prototype.connectTo=function(e){var i=this,r=this.linesGroup=this.group.group();return e.forEach(function(t){var e=[i.cx,i.cy],n=r.line(new SVG.PointArray([e,e]));n.attr(o).opacity(.3);var s=[i.cx-(i.cx-t.cx)/2,i.cy-(i.cy-t.cy)/2];n.animate(150,"sineOut").plot(new SVG.PointArray([e,s])),n.delay(25).animate(180,"sineOut").opacity(1),n.animate(200,"sineIn").opacity(o.opacity)}),t.timePromise(555)},e.prototype.toCenter=function(e,i){var r=this;return this.linesGroup.animate(100).opacity(0).once(1,function(){r.deleteLines()}),this.hex.animate(250,"backIn").center(e,i),this.shadow.animate(250,"backIn").center(e,i),t.timePromise(250)},e.prototype.disappear=function(e,i,r,o){function n(t,n){t.animate(s,">").ngon({radius:1.6*r,edges:o}).center(e,i).opacity(0)}var s=300;return n(this.hex),n(this.shadow),t.timePromise(s)},e.prototype.deleteLines=function(){this.linesGroup.remove()},t.MLHost=e}(window),function(t){"use strict";function e(){for(var t="",e=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","9","9","9","9","9","9","9","9"],i=0;i<5;i++)t+=Random.choice(e);return t}function i(t,e,i){this.headerElement=e,this.headerText=e.getAttribute("header"),this.consoleElement=i,t.vertexes={array:r,params:o},t.mlx=250,t.mly=192.5,CognIOTA.call(this,t)}var r=[{idx:1,pos:[63,35],neightbors:[2,6]},{idx:2,pos:[137,17],neightbors:[3,7]},{idx:3,pos:[245,18],neightbors:[4,7]},{idx:4,pos:[376,27],neightbors:[7,9]},{idx:5,pos:[44,118],neightbors:[6,10,11]},{idx:6,pos:[125,108],neightbors:[7,11]},{idx:7,pos:[286,86],neightbors:[]},{idx:8,pos:[362,102],neightbors:[9,11,12,13]},{idx:9,pos:[471,101],neightbors:[13]},{idx:10,pos:[23,226],neightbors:[11,14]},{idx:11,pos:[113,178],neightbors:[15]},{idx:12,pos:[377,195],neightbors:[16,18]},{idx:13,pos:[464,155],neightbors:[18]},{idx:14,pos:[42,275],neightbors:[15]},{idx:15,pos:[166,276],neightbors:[16,19]},{idx:16,pos:[238,259],neightbors:[17,20,21]},{idx:17,pos:[343,283],neightbors:[18,21,22]},{idx:18,pos:[473,275],neightbors:[]},{idx:19,pos:[27,346],neightbors:[20]},{idx:20,pos:[178,342],neightbors:[]},{idx:21,pos:[301,352],neightbors:[22]},{idx:22,pos:[457,332],neightbors:[]},{idx:23,pos:[120,220],neightbors:[]},{idx:24,pos:[142,249],neightbors:[]}],o={r:3,"stroke-width":6,stroke:"#79909b"},n={bg:"dist/img/env.png",whouse:"dist/img/storage.png",shop:"dist/img/shopping.png",carEmpty:"dist/img/carEmpty.png",carFull:"dist/img/carFull.png",tree:"dist/img/tree.png"},s=[{idx:23}],c=[{idx:4,color:"#03a9f4",params:{bet:["27","750"]}},{idx:14,color:"#9e4f24",params:{bet:["25","500"]}},{idx:21,color:"#00838f",params:{bet:["15","680"]}}],h=[{idx:1,color:"#9575cd"},{idx:12,color:"#5d4037"},{idx:20,color:"#827717"},{idx:22,color:"#3f51b5"},{idx:11,color:"#e040fb"}],a=[{idx:7,color:"#b71c1c",params:{bet:["10",["17","100"],"low"]}},{idx:9,color:"#ff6f00",params:{bet:["8",["31","65"],"low"]}},{idx:19,color:"#ff4081",params:{bet:["3",["12","50"],"average"]}}],u={w:35,h:35},l={r:1.4*u.w/2,border:1,bg:{fill:"transparent"},"fill-opacity":.4},p={toWarehouse:[15,16,21],toTree:[16,15,24],toShop:[15,14,10,5,6,1],toEnd:[2]};l.bg.r=l.r;var d={"stroke-width":2,"stroke-opacity":.2},f={r:11,"stroke-width":2,"fill-opacity":.3,family:"Times, serif",bg:{fill:"#63749b","fill-opacity":.9}};f.fz=1.2*f.r;var m={"font-family":"Rajdhani","font-size":"52px",fill:"#0060ff",stroke:"#0060ff","stroke-width":"1px",width:40},g="secondPage-slideshow-item__header--accent";(i.prototype=Object.create(CognIOTA.prototype)).constructor=i,i.prototype.init=function(){this.bg=this._addBG(),this.trees=this._createElements(s,n.tree),this.tree=this.trees[0],this.tree.img.img.addClass("tree"),this.whouses=this._createElements(c,n.whouse),this.shops=this._createElements(h,n.shop),this.cars=this._createElements(a,n.carEmpty),this.agents=this.whouses.concat(this.shops).concat(this.cars),this.shop=this.shops[0],this.provider=this.whouses[this.whouses.length-1],this.delivery=this.cars[this.cars.length-1],this.shopBid={price:"23",day:"today",quantity:"678",speed:"average"}},i.prototype._addBG=function(){var e=this.draw.image(n.bg,500,420);e.backward();var i,r;e.filter(function(t){i=t.gaussianBlur(0)}),this.graph.group.filter(function(t){r=t.gaussianBlur(0)});return e.blur=function(e){return i.animate(200,"<").attr("stdDeviation",e),r.animate(200,"<").attr("stdDeviation",e),t.timePromise(200)},e.unblur=function(){return i.animate(200,">").attr("stdDeviation","0 0"),r.animate(200,">").attr("stdDeviation","0 0"),t.timePromise(200)},e},i.prototype._createElements=function(t,i){var r=this,o=this.draw.group();this.mlCloud.group.forward();var n=Object.assign({},u);n.src=i;var s=t.map(function(t){var i=r.graph.vertexes[t.idx],s=new Agent(o,{circle:l,line:d,text:f,img:n,brackets:m,color:t.color,cx:i.pos[0],cy:i.pos[1],mlx:r.mlx,mly:r.mly,mlw:60});s.ip=e()+"...",t.params=t.params||{};for(var c in t.params)s[c]=t.params[c];return s.hide(),s});return s.blur=function(t,e){var i;return s.forEach(function(r){i=r.blur(t,e)}),i},s.unblur=function(t){var e;return s.forEach(function(i){e=i.unblur(t)}),e},s},i.prototype._writeHeader=function(e){e=e||"";var i=this;this.headerElement.stop=!1;var r=-1,o=(e+" ").split("").reduce(function(n,s,c){return"<"==s&&(r=e.indexOf(">",c)),c>r&&n.push(function(){return i.headerElement.stop?(o.stop=!0,NOOPPromise):(i.headerElement.innerHTML=e.slice(0,c),t.timePromise(50))}),n},[]);return t.promisesStack(o)},i.prototype.writeHeader=function(e){return e?(this.headerElement.innerHTML=this.headerText,t.NOOPPromise):this._writeHeader(this.headerText)},i.prototype.writeConsole=function(e){var i='<span style="color: '+e.author.color+'">'+e.author.ip+"</span> "+e.verb+":";this.consoleElement.querySelector("[console-author]").innerHTML=i;var r="";e.lines=e.lines||{};var o=Object.keys(e.lines).reduce(function(t,e){return t.length>e.length?t:e},"").length;if(e.type){n="TYPE";o=o||n.length,r+="<p>"+n+" "+(s="&nbsp;".repeat(o-n.length))+": <strong>"+e.type+"</strong></p>"}for(var n in e.lines){var s="&nbsp;".repeat(o-n.length);r+="<p>"+n+" "+s+": "+e.lines[n]+"<p>"}return this.consoleElement.querySelector("[console-body]").innerHTML=r,t.NOOPPromise},i.prototype.clearConsole=function(){this.consoleElement.querySelector("[console-author]").innerHTML="",this.consoleElement.querySelector("[console-body]").innerHTML=""},i.prototype.showDescription=function(e,i){function r(){return o._writeHeader(),classie.remove(o.headerElement,g),o.trees.unblur(),o.bg.unblur(),o.shops.unblur(),o.whouses.unblur(),o.cars.unblur(),NOOPPromise}var o=this;if((i=i||{}).clear)return r(),this.headerElement.innerHTML=" ",e();if(i.forced)return classie.add(this.headerElement,g),this.writeHeader(!0),e();classie.add(this.headerElement,g);var n=[];return n.push(function(){return o.trees.blur("3 3"),o.bg.blur("3 3"),o.shops.blur("3 3"),o.whouses.blur("3 3"),o.cars.blur("3 3")}),[{title:"Automatic Shops",elements:o.shops},{title:"Automatic Warehouses",elements:o.whouses},{title:"Self-Driving Cars",elements:o.cars}].forEach(function(e,i){var r=e.title,s=e.elements;n.push(function(){return t.timePromise(100)}),n.push(function(){return o._writeHeader(r)}),n.push(function(){return t.timePromise(300)}),n.push(function(){return s.unblur(!0)}),n.push(function(){return t.timePromise(1e3)}),n.push(function(){return s.blur("3 3",!0)})}),n.push(function(){return timePromise(200)}),n.push(r),n.push(function(){return t.NOOPPromise.then(e)}),this.stack=n,t.promisesStack(n)},i.prototype.showML=function(e,i){if((i=i||{}).clear)return this.mlCloud.hide(),this.agents.forEach(function(t){t.line.hide()}),e();var r=this,o=!i.forced,n=[];return n.push(function(){return r.mlCloud.show(o)}),n.push(function(){var t;return r.agents.forEach(function(e){t=e.line.show(o)}),t}),i.forced?(classie.remove(this.headerElement,g),this._writeHeader("")):n.push(function(){return t.timePromise(500)}),n.push(function(){return t.NOOPPromise.then(e)}),this.stack=n,t.promisesStack(n)},i.prototype.initialRequest=function(e,i){if((i=i||{}).clear)return this._writeHeader(""),this.shop.deactivate(!1),this.shop.circle.circleOut(!1),this.shop.circle.hideBG(!1),this.mlCloud.toDefault(),this.clearConsole(),e();var r=[],o=this,n=!i.forced;return i.forced?(this.shop.activate(!1),this.shop.circle.circleIn(!1)):(r.push(function(){return o.writeHeader()}),r.push(function(){var t='<span style="color:'+o.shop.color+'">';return o.writeConsole({author:o.shop,verb:"requests",type:"INITIAL",lines:{PRODUCT:"milk",QUANTITY:t+o.shopBid.quantity+"</span>",MAX_PRICE:t+o.shopBid.price+"</span>",SPEED:t+o.shopBid.speed+"</span>"}})}),r.push(function(){return o.shop.sendRequest()})),r.push(function(){return o.mlCloud.fallInColor(o.shop.color,n)}),r.push(function(){return t.NOOPPromise.then(e)}),this.stack=r,t.promisesStack(r)},i.prototype.providersAuction=function(e,i){if((i=i||{}).clear)return this._writeHeader(""),this.clearConsole(),this.provider.colorize(this.provider.color),this.provider.deactivate(),e();var r=this,o=[];i.forced||(o.push(function(){return r.writeHeader()}),o.push(function(){return r.mlCloud.ding()}));var n={initial:function(t){var e='<span style="color:'+r.shop.color+'">';return{author:r.mlCloud,verb:"broabcasts",type:"AUCTION_BROADCAST",lines:{PRODUCT:"milk",MAX_PRICE:e+r.shopBid.price+"</span>",QUANTITY:e+r.shopBid.quantity+"</span>"}}},bet:function(t){var e='<span style="color:'+t.color+'">';return{author:t,verb:"answers",type:"AUCTION_BID",lines:{PRODUCT:"milk",PRICE:e+t.bet[0]+"</span>",QUANTITY:e+t.bet[1]+"</span>"}}},calculate:function(t){var e='<span style="color:'+t.color+'">';return{author:r.mlCloud,verb:"calculates",type:"--",lines:{PRODUCT:"milk",PRICE:e+t.bet[0]+"</span>",QUANTITY:e+t.bet[1]+"</span>"}}},ack:function(t){var e='<span style="color:'+t.color+'">';return{author:r.mlCloud,verb:"answers",type:"AUCTION_ACK",lines:{PRODUCT:"milk",PRICE:e+t.bet[0]+"</span>",QUANTITY:e+t.bet[1]+"</span>"}}}},s=this.auction(this.whouses,this.provider,n,i.forced);return(o=o.concat(s)).push(function(){return t.NOOPPromise.then(e)}),this.stack=o,t.promisesStack(o)},i.prototype.deliveryAuction=function(e,i){if((i=i||{}).clear)return this._writeHeader(""),this.clearConsole(),this.delivery.colorize(this.provider.color),this.delivery.deactivate(),e();var r=[];if(!i.forced){var o=this;r.push(function(){return o.writeHeader()})}var n={initial:function(t){o.shop.color;return{author:o.mlCloud,verb:"broabcasts",type:"AUCTION_BROADCAST"}},bet:function(t){var e='<span style="color:'+t.color+'">';return{author:t,verb:"answers",type:"AUCTION_BID",lines:{PRICE:e+t.bet[0]+"</span> / km",LAT:e+t.bet[1][0]+"</span>",LNT:e+t.bet[1][1]+"</span>"}}},calculate:function(t){var e='<span style="color:'+t.color+'">';return{author:o.mlCloud,verb:"calculates",type:"--",lines:{PRICE:e+t.bet[0]+"</span> / km",SPEED:e+t.bet[2]+"</span>"}}},ack:function(t){t.color;return{author:o.mlCloud,verb:"answers",type:"AUCTION_ACK",lines:{WAREHOUS_POSITION:"[110, 80]",SHOP_POSITION:"[120, 100]",PRODUCT:"milk"}}}},s=this.auction(this.cars,this.delivery,n,i.forced);return(r=r.concat(s)).push(function(){return t.NOOPPromise.then(e)}),this.stack=r,t.promisesStack(r)},i.prototype.deliveryProcess=function(e,i){function r(t,e){var i=o.graph.vertexes[t],r=i.pos[0],n=i.pos[1];return o.delivery.go(r,n,e)}var o=this;if((i=i||{}).clear)return this._writeHeader(""),this.clearConsole(),this.delivery.img.update(n.carEmpty),this.delivery.go(this.delivery.cx,this.delivery.cy,!1),this.tree.img.img.removeClass("fallen-tree"),e();if(i.forced)return this.delivery.img.update(n.carEmpty),r(p.toEnd[p.toEnd.length-1],!1),this.tree.img.img.addClass("fallen-tree"),e();var s=[];return s.push(function(){return o.writeHeader()}),p.toWarehouse.forEach(function(t){s.push(function(){return r(t,!0)})}),s.push(function(){return o.delivery.img.update(n.carFull),t.timePromise(100)}),s.push(function(){return o.mlCloud.ding()}),p.toTree.forEach(function(t){s.push(function(){return r(t,!0)})}),s.push(function(){return o.tree.img.img.addClass("fallen-tree"),t.timePromise(150)}),p.toShop.forEach(function(t){s.push(function(){return r(t,!0)})}),s.push(function(){return o.delivery.img.update(n.carEmpty),t.timePromise(100)}),s.push(function(){return o.mlCloud.ding()}),p.toEnd.forEach(function(t){s.push(function(){return r(t,!0)})}),s.push(function(){return t.NOOPPromise.then(e)}),this.stack=s,t.promisesStack(s)},i.prototype.paymentProcess=function(e,i){if((i=i||{}).clear)return this._writeHeader(""),this.clearConsole(),this.mlCloud.fallInColor(this.shop.color,!1),this.provider.activate(!1),this.provider.colorize(this.shop.color),this.shop.activate(!1),this.delivery.activate(!1),this.delivery.colorize(this.shop.color),e();if(i.forced)return e();var r=[],o=this;return r.push(function(){return o.writeHeader()}),r.push(function(){return o.shop.sendRequest("I")}),r.push(function(){return o.shop.deactivate(!0),o.mlCloud.ding()}),r.push(function(){return o.provider.text.receive("I"),o.delivery.text.receive("I",o.delivery.img.cx,o.delivery.img.cy)}),r.push(function(){return o.provider.deactivate(!0),o.delivery.deactivate(!0),o.mlCloud.fallOutColor()}),r.push(function(){return t.NOOPPromise.then(e)}),this.stack=r,t.promisesStack(r)},t.ProtocolCognIOTA=i}(window),function(t){"use strict";function e(t,e){this.parent=t,this.nav=e,this.isAnimating=!1,this._init()}var i={paths:{rect:"M33,0h41c0,0,0,9.871,0,29.871C74,49.871,74,60,74,60H32.666h-0.125H6c0,0,0-10,0-30S6,0,6,0H33",right:"M33,0h41c0,0,5,9.871,5,29.871C79,49.871,74,60,74,60H32.666h-0.125H6c0,0,5-10,5-30S6,0,6,0H33",left:"M33,0h41c0,0-5,9.871-5,29.871C69,49.871,74,60,74,60H32.666h-0.125H6c0,0-5-10-5-30S6,0,6,0H33"},speed:500,w:68,h:60,fill:"rgb(237, 236, 218)","fill-opacity":1,minW:530,maxW:900};i.minSx=i.minW/i.w,e.prototype._init=function(){var e=t.innerWidth,i=t.innerHeight,r=this.parent.querySelectorAll("li"),o=r.length;this.step=100/o,this.parent.style.width=e*o+"px",this.parent.style.height=i+"px";var n=this;this.items=[],this.methods=[],r.forEach(function(t,r){t.style.width=e+"px",t.style.height=i+"px";var o=t.getAttribute("method"),s=n.createSlide(t,r,o);n.items.push(s),n.methods.push(o)})},e.prototype.createBG=function(e,r){var o=Math.min(e.offsetWidth,i.maxW),n=e.offsetHeight,s=Math.max(o/i.w*.8,i.minSx),c=n/i.h,h=Math.max(i.w*s,i.minW),a=n,u=h/2,l=a/2,p=e.querySelector("[container]");p.style.width=h+"px",p.style.height=a+"px";var d="secondPageSVGBG"+r;e.querySelector("[bg-parent]").setAttribute("id",d);var f=SVG(d).path(i.paths.rect).attr({fill:i.fill,"fill-opacity":i["fill-opacity"]}).center(u,l).scale(s,c);return{plot:function(e,r,o){e=e||"rect",f.stop();var n=f;return r&&(n=n.animate(r,o)),n.plot(i.paths[e]),n.center(u,l),r?t.timePromise(r):t.NOOPPromise}}},e.prototype.createAnimation=function(t,e,i){var r="secondPageSVG"+e;t.querySelector("[svg-parent]").setAttribute("id",r);var o=t.querySelector("[header]"),n=t.querySelector("[console]"),s=SVG(r);return new ProtocolCognIOTA({root:s,method:i,preparationMethods:this.methods.slice()},o,n)},e.prototype.createSlide=function(t,e,i){var r=this.createBG(t,e),o=this.createAnimation(t,e,i);return{play:function(){return new Promise(function(t){return o.play(t)})},stop:function(){r.plot(),o.headerElement.stop=!0,o.stop()},out:function(t,e){return new Promise(function(i){return r.plot(t,e,">").then(function(){return o.out(i)})})},in:function(t,e){return new Promise(function(i){return r.plot(t).then(function(){return r.plot("rect",e,"elastic").then(i)})})}}},e.prototype.play=function(){this.inPlay=!0,this.currentN=-1,this.goNext()},e.prototype.stop=function(){this.inPlay=!1,this.items[0].stop(),this._translate(0),this.isAnimating=!1,this.currentN=-1},e.prototype.goNext=function(){var t=this.currentN+1;t>this.items.length-1&&(t=0),this._morph(t)},e.prototype.goPrev=function(){var t=this.currentN-1;t<0&&(t=this.count-1),this._morph(t)},e.prototype._translate=function(e){this.currentN=e;var i=-1*this.currentN*this.step;return this.parent.style.WebkitTransform="translate3d("+i+"%,0,0)",this.parent.style.transform="translate3d("+i+"%,0,0)",t.timePromise(500)},e.prototype._morph=function(e){if(!this.isAnimating&&this.inPlay){this.isAnimating=!0;var r=this,o=e<this.currentN?"right":"left",n=i.speed,s=.5*n,c=this.items[e],h=this.items[this.currentN],a=[];h?(a.push(function(){return h.out(o,s)}),a.push(function(){return r._translate(e)}),a.push(function(){return c.in(o,n),NOOPPromise})):a.push(function(){return r._translate(e)}),a.push(function(){return c.play()}),t.promisesStack(a).then(function(){r.isAnimating=!1,r.inPlay&&r.goNext()})}},t.ProtocolSlideshow=e}(window),function(t){"use strict";t.Random={range:function(t,e){return Math.round(Math.random()*(e-t)+t)},choice:function(t){var e=t.length;return void 0===e&&(e=(t=Object.keys(t)).length),t[this.range(0,e-1)]},shuffle:function(t){var e,i,r,o=t.slice();for(r=o.length;r;r--)e=Math.floor(Math.random()*r),i=o[r-1],o[r-1]=o[e],o[e]=i;return o},deviate:function(t,e){return t+this.range(-1*e,e)}}}(window),function(t){"use strict";function e(t){t.vertexes={array:i,params:r},t.mlx=250,t.mly=150,CognIOTA.call(this,t)}var i=[{idx:1,neightbors:[2,6,7],pos:[25,25]},{idx:2,neightbors:[3,6],pos:[137,25]},{idx:3,neightbors:[4,7,8],pos:[255,25]},{idx:4,neightbors:[5,8],pos:[361,25]},{idx:5,neightbors:[9,10],pos:[475,25]},{idx:6,neightbors:[11,12],pos:[25,108]},{idx:7,neightbors:[13],pos:[137,108]},{idx:8,neightbors:[9,13],pos:[255,108]},{idx:9,neightbors:[14,20],pos:[361,108]},{idx:10,neightbors:[15],pos:[475,108]},{idx:11,neightbors:[12,18],pos:[25,192]},{idx:12,neightbors:[13,17,18],pos:[97,192]},{idx:13,neightbors:[14,19],pos:[170,192]},{idx:14,neightbors:[15],pos:[292,192]},{idx:15,neightbors:[16],pos:[413,192]},{idx:16,neightbors:[20,21],pos:[475,192]},{idx:17,neightbors:[18],pos:[25,275]},{idx:18,neightbors:[19],pos:[137,275]},{idx:19,neightbors:[20],pos:[255,275]},{idx:20,neightbors:[21],pos:[361,275]},{idx:21,neightbors:[],pos:[475,275]}],r={r:6,"stroke-width":1,stroke:"#2bd46c"},o=[2,4,6,9,18,21],n=[2,4,9,12,18,21],s=["#ff80ab","#f57c00","#1de9b6","#b2ff59","#6a1b9a","#d50000"],c={r:1.7*r.r,border:1,bg:{r:r.r,fill:r.stroke},"fill-opacity":.4},h={"stroke-width":2},a={r:.8*c.r,"stroke-width":1,"fill-opacity":.5,bg:{fill:"#63749b",opacity:.7},fz:.8*c.r*1.8};(e.prototype=Object.create(CognIOTA.prototype)).constructor=e,e.prototype.init=function(){this.agents=this._createShops(),this._createMLNodes();var t=this;this.shop=this.agents[0],this.providers=[1,2,4].map(function(e){return t.agents[e]}),this.provider=this.providers[this.providers.length-1]},e.prototype._createShops=function(){var t=this,e=this.draw.group();return this.mlCloud.group.forward(),n.map(function(i,r){var o=t.graph.vertexes[i],n=new Agent(e,{circle:c,line:h,text:a,color:s[r],cx:o.pos[0],cy:o.pos[1],mlx:t.mlx,mly:t.mly,mlw:60});return n.circle.hideFill(!1),n.hide(),n})},e.prototype._createMLNodes=function(){var t=this,e=this.draw.group();this.mlhosts=o.map(function(i){var r=t.graph.vertexes[i],o=new MLHost(e,r);return o.hide(),o})},e.prototype._hideMLHosts=function(){this.mlhosts.forEach(function(t){t.hide()})},e.prototype.createTangle=function(t,e){return(e=e||{}).forced?t():setTimeout(t,800)},e.prototype.createMLNodes=function(t,e){var i=this;if((e=e||{}).clear)return this._hideMLHosts();var r=250;e.forced&&(r=0);var o=-r;return Random.shuffle(this.mlhosts).forEach(function(n,s){return o+=r,setTimeout(function(){var r=n.show(!e.forced);if(s==i.mlhosts.length-1)return r.then(t)},o)})},e.prototype.createMLCloud=function(t,e){if((e=e||{}).forced)return this.mlCloud.show(),this._hideMLHosts(),t();if(e.clear)return this.mlCloud.hide(),this.mlhosts.forEach(function(t){return t.deleteLines(),t.show()});var i,r=this;return this.mlhosts.forEach(function(t){i=t.connectTo(r.mlhosts)}),i.then(function(){var e;return r.mlhosts.forEach(function(t){e=t.toCenter(r.mlx,r.mly)}),e.then(function(){var e;return setTimeout(function(){r.mlCloud.show()},100),r.mlhosts.forEach(function(t){e=t.disappear(r.mlx,r.mly,MLCloud.r,MLCloud.edges)}),e.then(t)})})},e.prototype.shopRequests=function(t,e){var i=this;if((e=e||{}).clear)return this.agents.forEach(function(t){t.hide()}),this.shop.deactivate(),t();var r,o=!e.forced;return this.agents.forEach(function(t){r=t.show(o)}),r.then(function(){return e.forced?i.shop.activate(!1).then(t):setTimeout(function(){i.shop.sendRequest().then(t)},1e3)})},e.prototype.mlSendsResponse=function(t,e){if((e=e||{}).clear)return this.mlCloud.toDefault();var i=this.mlCloud.fallInColor(this.shop.color,!e.forced);if(e.forced)return i.then(t);var r=this;return i.then(function(){return r.mlCloud.ding().then(function(){return r.shop.receiveResponse().then(t)})})},e.prototype.mlAuction=function(e,i){if((i=i||{}).clear)return this.provider.deactivate(!1),this.mlCloud.colorShadow(this.shop.color,!1),e();if(i.forced)return this.provider.activate(!1),this.mlCloud.colorShadow(this.provider.color,!1),e();var r=[],o=this;return this.providers.forEach(function(e){r.push(function(){return e.activate(!0,!1),o.mlCloud.colorShadow(e.color,!0)}),r.push(function(){return t.timePromise(200)}),e.idx==o.provider.idx?r.push(function(){return o.mlCloud.ding()}):(r.push(function(){return e.deactivate(!0,!1)}),r.push(function(){return t.timePromise(100)}))}),r.push(function(){return t.NOOPPromise.then(e)}),t.promisesStack(r)},e.prototype.mlChooseProvider=function(t,e){if((e=e||{}).clear)return this.mlCloud.colorShadow(this.provider.color,!1),this.provider.colorize(this.provider.color,!1,!1);if(e.forced)return t();var i=this;return this.mlCloud.colorShadow(this.shop.color,!0),this.mlCloud.ding(),this.provider.colorize(this.shop.color),this.provider.receiveRequest().then(function(){return i.provider.sendResponse().then(function(){i.shop.receiveResponse().then(t)})})},e.GRAPH_SETTINGS=r,t.TangleCognIOTA=e}(window),function(t){"use strict";function e(t){this.parent=t,this.states=["description","svg"],this.descriptionTime=2e3,this.items=[],this.methods=[];var e=this.parent.querySelectorAll("li"),i=e.length;this.parent.style.width=100*i+"%",this.step=100/i;var r=this;e.forEach(function(t,e){var i=t.getAttribute("method"),o=r.createSlide(t,e,i);r.items.push(o),r.methods.push(i)}),this.currentN=-1,this.currState=this.states.length,setTimeout(function(){r.goNext()},400)}var i={description:"firstPage-main-slideshow-item--description"};e.prototype.createSlide=function(t,e,i){var r=this.createDescriptionSlide(t,e),o=this.createSVGSlide(t,e,i),n=this;return{play:function(){return"description"==n.states[n.currState]?r.play():o.play()},out:function(){return o.out()}}},e.prototype.createDescriptionSlide=function(t,e){var r=this;return{play:function(){return new Promise(function(e){classie.add(t,i.description),setTimeout(e,r.descriptionTime)})}}},e.prototype.createSVGSlide=function(t,e,r){var o="fisrtPageSVG"+e;t.querySelector("[svg-parent]").setAttribute("id",o);var n=new TangleCognIOTA({root:SVG(o),method:r,preparationMethods:this.methods.slice()});return{play:function(){return new Promise(function(e,r){classie.remove(t,i.description),n.play(e)})},out:function(){n.out()}}},e.prototype.goNext=function(){var t=this;this.currState+=1;var e=this.states[this.currState],i=this.items[this.currentN];e||(i&&i.out(),this.currState=0,this.currentN+=1,this.currentN>this.items.length-1&&(this.currentN=0),i=this.items[this.currentN]);var r=-1*this.currentN*this.step;this.parent.style.WebkitTransform="translate3d("+r+"%,0,0)",this.parent.style.transform="translate3d("+r+"%,0,0)",i.play().then(function(){t.goNext()})},t.TangleSlideshow=e}(window),function(t){"use strict";function e(t){return new RegExp("(^|\\s+)"+t+"(\\s+|$)")}function i(t,e){(r(t,e)?n:o)(t,e)}var r,o,n;"classList"in document.documentElement?(r=function(t,e){return t.classList.contains(e)},o=function(t,e){t.classList.add(e)},n=function(t,e){t.classList.remove(e)}):(r=function(t,i){return e(i).test(t.className)},o=function(t,e){r(t,e)||(t.className=t.className+" "+e)},n=function(t,i){t.className=t.className.replace(e(i)," ")});var s={hasClass:r,addClass:o,removeClass:n,toggleClass:i,has:r,add:o,remove:n,toggle:i};"function"==typeof define&&define.amd?define(s):"object"==typeof exports?module.exports=s:t.classie=s}(window),function(t){"use strict";function e(t,e,i){this.vertexes=e.reduce(function(t,e){return t[e.idx]=Object.assign({},e),t},{}),this.group=t.group(),this.edgeGroup=this.group.group(),this.vertexesGroup=this.group.group();for(var r in this.vertexes){var o=this.vertexes[r];this.createVertex(o,i)}}e.prototype.createVertex=function(t,e){var i=this,r=this.vertexesGroup.circle();r.attr({fill:e.stroke,r:e.r}),r.center(t.pos[0],t.pos[1]),23!=t.idx&&24!=t.idx||r.opacity(0),t.neightbors.forEach(function(r){var o=i.vertexes[r];o.neightbors.push(t.idx),i.edgeGroup.line(new SVG.PointArray([t.pos,o.pos])).attr(e)})},t.Graph=e}(window),function(t){"use strict";t.createSalesman=function(){function t(){!0===n?(document.body.className="",e.stop(),n=!1,s.removeEventListener("click",t),setTimeout(function(){o.addEventListener("click",t)},200)):(document.body.className="secondPage",setTimeout(function(){e.play(),s.addEventListener("click",t)},200),n=!0,o.removeEventListener("click",t))}var e,i=document.querySelector("#secondPage ul.secondPage-slideshow"),r=document.querySelector("#openProtocolExample").getBoundingClientRect(),o=document.querySelector("#secondPage");o.style.left=0,o.style.top=0,o.style.width="100%",o.style.height="100%";e=new ProtocolSlideshow(i,void 0),o.style.left=r.x+"px",o.style.top=r.y+"px",o.style.width=r.width+"px",o.style.height=r.height+"px";var n=!1,s=document.getElementById("closeProtocolExample");o.addEventListener("click",t)},t.createMain=function(){var t=document.querySelector("#firstPage ul.firstPage-main-slideshow");new TangleSlideshow(t)}}(window),function(t){"use strict";t.NOOP=Function.prototype,t.NOOPPromise=new Promise(function(t){t()}),t.timePromise=function(t){return new Promise(function(e){setTimeout(e,t)})},t.promisesStack=function(t){return new Promise(function(e){function i(r){var o=t[r];return!o||t.stop?e():new Promise(function(i){return t.stop&&(e(),i()),o().then(i)}).then(function(){t.stop||i(r+1)})}return i(0)})}}(window);